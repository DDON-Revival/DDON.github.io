<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DDON – Stage Search</title>
</head>
<body>

<h1>Stage Search</h1>

<input id="search" placeholder="Stage name or ID…" style="width:300px">

<ul id="results"></ul>

<script type="module">
import { loadStageNames } from "./js/stage-names.js";

loadStageNames().then(stages => {

  const list = Object.entries(stages).map(([id, obj]) => ({
    id,
    name: obj.en
  }));

  const input = document.getElementById("search");
  const results = document.getElementById("results");

  input.addEventListener("input", () => {
    const q = input.value.toLowerCase();
    results.innerHTML = "";

    list
      .filter(s =>
        s.id.includes(q) ||
        s.name.toLowerCase().includes(q)
      )
      .slice(0, 50)
      .forEach(s => {
        const li = document.createElement("li");
        li.innerHTML = `<a href="stage.html?id=${s.id}">${s.name}</a>`;
        results.appendChild(li);
      });
  });
});
</script>

</body>
</html>
