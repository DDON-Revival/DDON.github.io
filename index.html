<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DDON Revival</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    font-family:'Cinzel', serif;
    background:#0f0f14;
    color:#e6e6e6;
    overflow-x:hidden;
}

/* üî• Spark Background */
#particles{
    position:fixed;
    width:100%;
    height:100%;
    top:0;
    left:0;
    z-index:-1;
    background:#0f0f14;
    overflow:hidden;
}

.spark{
    position:absolute;
    width:4px;
    height:4px;
    background:#c8a75d;
    border-radius:50%;
    opacity:0.7;
    animation:float 8s linear infinite;
}

@keyframes float{
    0%{transform:translateY(100vh);opacity:0;}
    20%{opacity:1;}
    100%{transform:translateY(-10vh);opacity:0;}
}

header{
    background:#1b1b25;
    padding:20px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-bottom:2px solid #c8a75d;
}

nav a{
    color:#e6e6e6;
    text-decoration:none;
    margin:0 15px;
}

nav a:hover{
    color:#c8a75d;
}

.hero{
    text-align:center;
    padding:120px 20px;
    background:linear-gradient(to bottom,#1b1b25,#0f0f14);
}

.hero h1{
    font-size:60px;
    color:#c8a75d;
}

.section{
    padding:80px 20px;
    text-align:center;
}

.card{
    background:#1b1b25;
    padding:30px;
    margin:20px;
    display:inline-block;
    width:300px;
    border:1px solid #2a2a35;
    transition:0.3s;
}

.card:hover{
    border-color:#c8a75d;
    transform:translateY(-5px);
}

.lang-selector{
    position:relative;
}

.lang-btn{
    background:#1b1b25;
    border:1px solid #c8a75d;
    color:#c8a75d;
    padding:6px 12px;
    cursor:pointer;
}

.lang-dropdown{
    display:none;
    position:absolute;
    right:0;
    background:#1b1b25;
    border:1px solid #c8a75d;
}

.lang-dropdown div{
    padding:6px 12px;
    cursor:pointer;
}

.lang-dropdown div:hover{
    background:#2a2a35;
}

.lang-selector:hover .lang-dropdown{
    display:block;
}

footer{
    text-align:center;
    padding:20px;
    background:#1b1b25;
}
</style>
</head>

<body>

<div id="particles"></div>

<header>
    <h2>DDON Revival</h2>

    <div id="totalPlayersBox" style="color:#c8a75d;font-weight:bold;">
        Total Players Online: 0
    </div>

    <nav>
        <a href="#home" data-key="home">Home</a>
        <a href="#news" data-key="news">News</a>
        <a href="#status" data-key="status">Server Status</a>
        <a href="leaderboard.html" data-key="leaderboard">Leaderboard</a>
        <a href="howtoplay.html" data-key="howToPlay">How To Play</a>
		<a href="wiki.html" data-key="wiki">Wiki</a>
		<a href="custom.html" data-key="customFeatures">Custom Features</a>
	    <a href="login.html" style="color:#c8a75d;font-weight:bold;">Login</a>
    </nav>

    <div class="lang-selector">
        <button class="lang-btn">üåç</button>
        <div class="lang-dropdown" id="languageList"></div>
    </div>
</header>

<section id="home" class="hero">
    <h1 data-key="title">Dragon's Dogma Online</h1>
    <p data-key="subtitle">Biggest Server ‚Ä¢ Custom Content ‚Ä¢ Hardcore</p>
</section>

<section id="news" class="section">
    <h2 data-key="newsTitle">Latest News</h2>

    <div class="card">
        <h3 data-key="news1Title">Server Opening</h3>
        <p data-key="news1Text">DDON is now live!</p>
    </div>

    <div class="card">
        <h3 data-key="news2Title">Hardcore Mode</h3>
        <p data-key="news2Text">Hardcore Mode is now live!</p>
    </div>
</section>

<section id="status" class="section">
    <h2 data-key="serverStatusTitle">Server Status</h2>
    <div id="serverStatusContainer"></div>
</section>

<footer>
2023 DDON Revival ‚Ä¢ Unofficial Fan Project
</footer>

<!-- üî• translations FIRST -->
<script src="translations.js"></script>

<script>

/* ===========================
   üî• Spark Generator
=========================== */
const container = document.getElementById("particles");
for(let i=0;i<40;i++){
    let spark=document.createElement("div");
    spark.classList.add("spark");
    spark.style.left=Math.random()*100+"vw";
    spark.style.animationDuration=(5+Math.random()*5)+"s";
    spark.style.animationDelay=Math.random()*5+"s";
    container.appendChild(spark);
}

/* ===========================
   LANGUAGE SYSTEM
=========================== */

function setLanguage(lang){
    const t = translations[lang];
    if(!t) return;

    document.querySelectorAll("[data-key]").forEach(el=>{
        const key = el.getAttribute("data-key");
        if(t[key]) el.textContent = t[key];
    });

    localStorage.setItem("lang", lang);
    loadServerStatus();
}

languages.forEach(lang=>{
    const div=document.createElement("div");
    div.innerHTML=`${lang.flag} ${lang.name}`;
    div.onclick=()=>setLanguage(lang.code);
    document.getElementById("languageList").appendChild(div);
});

const saved = localStorage.getItem("lang") || "en";
setLanguage(saved);

/* ===========================
   SERVER STATUS
=========================== */

async function loadServerStatus(){
    try{
        const res = await fetch("https://api.ddon.org/api/status");
        const data = await res.json();

        const container = document.getElementById("serverStatusContainer");
        container.innerHTML="";

        const div=document.createElement("div");
        div.className="card";
        div.innerHTML=`
            <h3>Live Server Status</h3>
            <p>üü¢ Online Players: ${data.online}</p>
            <p>üë§ Total Accounts: ${data.totalAccounts}</p>
            <p>üéÆ Total Characters: ${data.totalCharacters}</p>
        `;
        container.appendChild(div);

        document.getElementById("totalPlayersBox").textContent=
            "Total Players Online: " + data.online;

    }catch(err){
        console.error("Live status failed",err);
    }
}

loadServerStatus();
setInterval(loadServerStatus,15000);

</script>

</body>
</html>
