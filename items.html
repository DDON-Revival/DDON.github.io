<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DDON Wiki - Items</title>

<style>
body{
    margin:0;
    background:#0f0f14;
    color:#e6e6e6;
    font-family:Arial;
}

header{
    background:#1b1b25;
    padding:20px;
    border-bottom:2px solid #c8a75d;
}

h1{
    margin:0;
    color:#c8a75d;
}

.container{
    max-width:1200px;
    margin:40px auto;
    padding:20px;
}

input{
    padding:10px;
    width:300px;
    background:#111;
    color:white;
    border:1px solid #c8a75d;
}

.item{
    background:#1b1b25;
    padding:15px;
    margin-top:10px;
    border:1px solid #2a2a35;
}
</style>
</head>
<body>

<header>
<h1>Item Wiki</h1>
</header>

<div class="container">
<input type="text" id="search" placeholder="Search item...">
<div id="itemList"></div>
</div>

<script>

let items = [];

fetch("datas/itemlist.csv")
.then(r=>r.text())
.then(text=>{
    const rows = text.split("\n");
    rows.forEach(r=>{
        const cols = r.split(",");
        if(cols[1])
            items.push({ id:cols[0], name:cols[1] });
    });
    renderItems();
});

function renderItems(filter=""){

    const list = document.getElementById("itemList");
    list.innerHTML="";

    items.forEach(item=>{

        if(filter && !item.name.toLowerCase().includes(filter.toLowerCase()))
            return;

        list.innerHTML += `
        <div class="item">
            <strong>ID:</strong> ${item.id}<br>
            <strong>Name:</strong> ${item.name}
        </div>
        `;
    });
}

document.getElementById("search").addEventListener("input",e=>{
    renderItems(e.target.value);
});

</script>

</body>
</html>
